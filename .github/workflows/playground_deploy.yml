name: Deploy to Docassemble Playground

# Deploy to playground for interactive testing
on:
  push:
    branches:
      - main
      - dev
      - feature/*
  workflow_dispatch:  # Allow manual trigger

jobs:
  deploy-to-playground:
    runs-on: ubuntu-latest
    name: Deploy to Playground
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Deploy to Docassemble Playground
        uses: SuffolkLITLab/ALActions/da_playground_install@main
        with:
          SERVER_URL: ${{ secrets.SERVER_URL }}
          DOCASSEMBLE_DEVELOPER_API_KEY: ${{ secrets.DOCASSEMBLE_DEVELOPER_API_KEY }}
          PROJECT_NAME: ${{ secrets.PROJECT_NAME }}

      - name: Deployment Summary
        run: |
          echo "### Playground Deployment Complete! :rocket:" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "Your package has been deployed to the playground." >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**Server:** ${{ secrets.SERVER_URL }}" >> $GITHUB_STEP_SUMMARY
          echo "**Project:** ${{ secrets.PROJECT_NAME }}" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "Go to your docassemble Playground to test the changes!" >> $GITHUB_STEP_SUMMARY
